def ArrayList: import "std/types.bam".ArrayList;

def realloc: import "std/types.bam".realloc;
def free: import "std/types.bam".free;

def Collect: fn[T] -> (fn[] -> Types.ArrayList(*Void)) {
    def SliceT: ArrayList(T.Item);

    return fn[base: *T] -> SliceT {
        def result: new SliceT;
        result.init();

        def sp: new T.Item;

        while (base.hasNext()) {
            sp = base.next();

            result.append(*sp);
        }

        return *result;
    }; 
};
